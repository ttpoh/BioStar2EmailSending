extends layout
block content
    
    script(type='text/javascript').
        const toggle = document.querySelector('.toggle');
        toggle.addEventListener('click', () => {
        toggle.classList.toggle('on');
        });
        var mailInfo = !{JSON.stringify(mailInfo)};
    script(src="/../js/mail/mail.js")
    .content
        .window_left
        .window_right        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
            <label for="mail"><i class="fas fa-envelope"></i></label>
            headerlabel メール設定
            .top-container
                form(name="form", method="POST")
                    #header
                        ul(id="ul")
                            li 基本設定
                    div.smtp-setting
                        section.setting
                           each row in [1, 2, 3]
                            each col in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,13]                                                    
                               .article.smtp-input(class=highlightClass) 
                                if row === 1  && col === 1
                                    <label id="smtp-label">通知設定</label>
                                else if row === 1 && col === 2
                                    .cell-container
                                        <label id="smtp-label" style="margin-right: 30px;" id="通知" name="通知">通知ON</label>
                                        //- <input type="checkbox" id="toggle" hidden> 
                                        //- <label for="toggle" class="toggleSwitch">
                                        //- <span class="toggleButton"></span>
                                        div.toggle
                                            script.
                                                document.addEventListener('DOMContentLoaded', function() {
                                                    const toggle = document.querySelector('.toggle');
                                                    toggle.addEventListener('click', function() {
                                                    toggle.classList.toggle('on');
                                                    if (toggle.classList.contains('on')) {
                                                            // If the toggle button is turned on, make a request to '/route/on'
                                                            fetch('/mail/AlarmOn', {
                                                                method: 'POST', // or 'GET' depending on your server setup
                                                                // You can add more configurations like headers, body, etc. if needed
                                                            })
                                                            .then(response => {
                                                                // Handle the response if needed
                                                            })
                                                            .catch(error => {
                                                                console.error('Error:', error);
                                                            });
                                                    } else {
                                                            // If the toggle button is turned off, make a request to '/route/off'
                                                            fetch('/mail/AlarmOff', {
                                                                method: 'POST', // or 'GET' depending on your server setup
                                                                // You can add more configurations like headers, body, etc. if needed
                                                            })
                                                            .then(response => {
                                                                // Handle the response if needed
                                                            })
                                                            .catch(error => {
                                                                console.error('Error:', error);
                                                            });
                                                        }
                                                    });
                                                });
                                        
                                        //- </label>
                                else if row === 1 && col === 4
                                    <label id="smtp-label">SMTP設定</label>
                                else if row === 1 && col === 8
                                    <label id="smtp-label">SMTPサバーバー名称</label>
                                else if row === 1 && col === 9
                                    input(type="text", id="SMTPサバーバー名称", name="SMTPサバーバー名称", value = mailInfo.smtp.ServerName)
                                else if row === 1 && col === 11
                                    //- <label id="smtp-label">説明</label>
                                else if row === 1 && col === 12
                                    //- input(type="text", id="説明" name="説明")
                                else if row === 2 && col === 1
                                    <label id="smtp-label">SMTPサバーバーアドレス</label>
                                else if row === 2 && col === 2
                                    input(type="text", id="SMTPサバーバーアドレス" name="SMTPサバーバーアドレス", value = mailInfo.smtp.ServerAddress)
                                else if row === 2 && col === 4
                                    <label id="smtp-label">ポート</label>
                                else if row === 2 && col === 5
                                    input(type="text", id="ポート" name="ポート", value = mailInfo.smtp.port)
                                else if row === 2 && col === 7
                                    <label id="smtp-label">SMTPパスワード</label>
                                else if row === 2 && col === 8
                                    input(type="text", id="SMTPパスワード" name="SMTPパスワード", value = mailInfo.smtp.password)
                                else if row === 2 && col === 10
                                    <label id="smtp-label">送信者名メール</label>
                                else if row === 2 && col === 11
                                    input(type="text", id="送信者名メール" name="送信者名メール", value = mailInfo.smtp.company)
                                else if row === 2 && col === 13
                                    //- <label id="smtp-label">セキュリティタイプ</label>
                                else if row === 3 && col === 1
                                    //- input(type="text", id="セキュリティタイプ" name="セキュリティタイプセキュリティタイプ")
                                else if row === 3 && col === 3
                                    <label id="smtp-label">受信者メール</label>
                                else if row === 3 && col === 4
                                    input(type="text", id="受信者メール" name="受信者メール", value = mailInfo.smtp.parents)
                                else if row === 3 && col === 6
                                    //- <label id="smtp-label">セキュリティタイプ</label>
                                else if row === 3 && col === 7
                                    //- input(type="text", id="セキュリティタイプ" name="セキュリティタイプ")
                                else if row === 3 && col === 10
                                    button(type="submit", value="smtp", onclick="javascript: form.action='/mail/smtp';") 設定保存
                                    //- button(type="submit", id="smtpsave", name="smtpsave") 設定保存
                                else if row === 3 && col === 11
                                    <label id="smtp-label">テストメール宛先</label>
                                else if row === 3 && col === 12
                                    input(type="text", id="テストメール宛先" name="テストメール宛先")
                                else if row === 3 && col === 13
                                    button(type="submit", value="test", onclick="javascript: form.action='/mail/test';") 送信
                                    //- button(type="send", id="testMail", name="testMail") 送信

                                //- else
                                //-     input(type="text" placeholder=`Input ${row},${col}`, id=`input-${row}-${col}`)
                      
            .main-container
                #header
                    ul(id="ul")
                        li メール設定
                div.mail-setting
                    section.mail-label
                        .grid-item
                            <label id="mail-label">件名</label>
                        .grid-item
                            <input type="text" class="input-small">
                        .grid-item
                            <label id="mail-label">内容</label>
                        .grid-item
                            <input type="text" class="input-large">
            footer © 2023 SECURE Inc.  All rights reserved.

